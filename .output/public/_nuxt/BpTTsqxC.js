import{D as d,r as i,E as g}from"./cWDG9JpC.js";import{g as v}from"./CrFpiiNM.js";import{s as h,a as y}from"./CuvDjrLx.js";const U=d("post-store",()=>{const s=i(!1),e=i({id:null,title:"",post_content:""}),l=g(),o=i(!1);async function m(){var u,p,f;const a=v();try{o.value=!0;const t=(u=l.public)==null?void 0:u.API_BASE_URL,n=s.value?t+"/posts/"+e.value.id:t+"/posts",r=s.value?"PUT":"POST",c=await $fetch(n,{headers:{Accept:"application/json","content-type":"application/json",Authorization:`Bearer ${a==null?void 0:a.token}`},method:r,body:JSON.stringify(e.value)});o.value=!1,s.value=!1,e.value={},h(c==null?void 0:c.message)}catch(t){if(o.value=!1,((p=t==null?void 0:t.response)==null?void 0:p.status)===422){const n=(f=t.response)==null?void 0:f._data;for(const r of n)y(r)}}}return{edit:s,postInput:e,loading:o,createPost:m,config:l}});export{U as u};
